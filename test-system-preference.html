<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Pr√©f√©rence Syst√®me</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
            background: var(--bg-primary, #ffffff);
            color: var(--text-primary, #000000);
            transition: background 0.3s, color 0.3s;
        }
        
        .card {
            background: var(--bg-card, #f8f9fa);
            border: 1px solid var(--border-color, #dee2e6);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: var(--shadow, 0 2px 4px rgba(0,0,0,0.1));
        }
        
        .btn {
            background: var(--accent-color, #007bff);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }
        
        .info {
            background: var(--info-bg, #d1ecf1);
            border: 1px solid var(--info-border, #bee5eb);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        /* Variables pour le mode sombre */
        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-card: #2d2d2d;
            --text-primary: #ffffff;
            --border-color: #404040;
            --shadow: 0 2px 4px rgba(0,0,0,0.3);
            --accent-color: #4dabf7;
            --info-bg: #1e3a5f;
            --info-border: #3b82f6;
        }
        
        /* Variables pour le mode clair */
        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-card: #f8f9fa;
            --text-primary: #000000;
            --border-color: #dee2e6;
            --shadow: 0 2px 4px rgba(0,0,0,0.1);
            --accent-color: #007bff;
            --info-bg: #d1ecf1;
            --info-border: #bee5eb;
        }
    </style>
</head>
<body>
    <h1>Test de la D√©tection de Pr√©f√©rence Syst√®me</h1>
    
    <div class="card">
        <h2>Informations Syst√®me</h2>
        <div class="info">
            <strong>Pr√©f√©rence syst√®me d√©tect√©e:</strong> <span id="systemPreference">...</span>
        </div>
        <div class="info">
            <strong>Th√®me actuel:</strong> <span id="currentTheme">...</span>
        </div>
        <div class="info">
            <strong>Pr√©f√©rence stock√©e:</strong> <span id="storedTheme">...</span>
        </div>
    </div>
    
    <div class="card">
        <h2>Contr√¥les</h2>
        <button class="btn" id="themeToggle">üåô</button>
        <button class="btn" id="clearStorage">Effacer Stockage</button>
        <button class="btn" id="testSystemChange">Simuler Changement Syst√®me</button>
    </div>
    
    <div class="card">
        <h2>Instructions de Test</h2>
        <ol>
            <li><strong>Premier chargement:</strong> Le th√®me devrait √™tre en mode "Syst√®me" (üñ•Ô∏è)</li>
            <li><strong>Cycle des th√®mes:</strong> Cliquez pour faire: Syst√®me ‚Üí Clair ‚Üí Sombre ‚Üí Syst√®me</li>
            <li><strong>Mode Syst√®me:</strong> Quand en mode syst√®me, changez votre pr√©f√©rence OS pour voir l'effet</li>
            <li><strong>Mode Manuel:</strong> En mode Clair/Sombre, le th√®me reste fixe m√™me si vous changez le syst√®me</li>
            <li><strong>Reset:</strong> Cliquez sur "Effacer Stockage" pour revenir au mode syst√®me</li>
        </ol>
        
        <h3>√âtats du Toggle :</h3>
        <ul>
            <li><strong>üñ•Ô∏è Syst√®me :</strong> Suit automatiquement la pr√©f√©rence de votre OS</li>
            <li><strong>‚òÄÔ∏è Clair :</strong> Toujours en mode clair, m√™me si votre OS est en sombre</li>
            <li><strong>üåô Sombre :</strong> Toujours en mode sombre, m√™me si votre OS est en clair</li>
        </ul>
    </div>

    <script src="theme-manager.js"></script>
    <script>
        // Initialiser le gestionnaire de th√®mes
        const themeManager = new ThemeManager();
        
        // Fonction pour mettre √† jour les informations affich√©es
        function updateDisplay() {
            // Pr√©f√©rence syst√®me
            const systemPref = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            document.getElementById('systemPreference').textContent = systemPref;
            
            // Th√®me actuel
            document.getElementById('currentTheme').textContent = themeManager.getCurrentTheme();
            
            // Pr√©f√©rence stock√©e
            const stored = localStorage.getItem('simRacingTheme');
            document.getElementById('storedTheme').textContent = stored || 'aucune';
        }
        
        // Mettre √† jour l'affichage au chargement et lors des changements
        document.addEventListener('DOMContentLoaded', () => {
            updateDisplay();
            
            // Mettre √† jour toutes les 2 secondes pour voir les changements
            setInterval(updateDisplay, 2000);
            
            // Bouton pour effacer le stockage
            document.getElementById('clearStorage').addEventListener('click', () => {
                localStorage.removeItem('simRacingTheme');
                location.reload();
            });
            
            // Bouton pour simuler un changement syst√®me (pour test)
            document.getElementById('testSystemChange').addEventListener('click', () => {
                alert('Pour tester le changement syst√®me:\n1. Changez votre pr√©f√©rence syst√®me (macOS: Pr√©f√©rences Syst√®me > Apparence, Windows: Param√®tres > Personnalisation > Couleurs)\n2. Rechargez cette page');
            });
        });
        
        // √âcouter les changements de th√®me pour mettre √† jour l'affichage
        document.addEventListener('themeChanged', updateDisplay);
    </script>
</body>
</html>
